---
title: Desplegando una aplicaci√≥n Rails Api en Railway
description: Mostrar√© los pasos necesarios para configurar el servidor y hacer que la aplicaci√≥n est√© disponible para su uso en producci√≥n.
date: 2023-01-12T16:29:27.082Z
lang: es
published: true
tags: Railway, Rails, API, Github
---

## 1. Aseg√∫rese de tener una cuenta en Railway

Para empezar es necesario tener un cuenta, para hacerlo solo necesitas acceder a este [enlace](https://railway.app?referralCode=4_VY9a) e iniciar session con tu cuenta de `Github`.

![](/static/img/articles/deploying-rails-api-railway/login-railway.JPG)

La integraci√≥n con Github ser√° beneficiosa para nosotros, ya que facilitar√° el proceso de despliegue

## 2. Crear un Proyecto en Railway

Una vez que iniciemos sesi√≥n, nos redirigir√° hacia el dashboard de Railway, donde tendremos que crear un nuevo proyecto:

![](/static/img/articles/deploying-rails-api-railway/new-project-railway.jpg)

Nos mostrar√° una lista de opciones, nosotros elegiremos la opci√≥n de `Deploy from Github repo`

![](/static/img/articles/deploying-rails-api-railway/deploy-from-github-repo.jpg)

Railway a√∫n no sabe con que repositorio nos vamos a conectar, por eso seleccionamos la opci√≥n de `Configure GitHub App`.

![](/static/img/articles/deploying-rails-api-railway/configure-github-app.jpg)

Esto nos llevara hacia Github para darle permisos a Railway de lectura de la lista de proyectos que quisi√©ramos desplegar en Railway.

![](/static/img/articles/deploying-rails-api-railway/permissions-for-github.jpg)

En mi caso, solo dare permiso a un repositorio llamado `rails-api` y guardare los cambios.
Luego me va a redireccionar a Railway listando el proyecto que quiero desplegar y lo seleccionamos.

![](/static/img/articles/deploying-rails-api-railway/project-to-deploy.jpg)

Luego de seleccionarla tendremos la opci√≥n de desplegar la aplicaci√≥n o de agregar variables de entorno, nosotros por ahora vamos a seleccionar la opci√≥n de desplegar la aplicaci√≥n.

![](/static/img/articles/deploying-rails-api-railway/add-variables.jpg)

Y nuestra aplicaci√≥n empezara a el proceso de despliegue:

![](/static/img/articles/deploying-rails-api-railway/deploying.jpg)

## 3. Agregando variables de entorno.

Para que la aplicaci√≥n despliegue con √©xito sera necesario agregar algunas variables de entorno, vamos a ir construyendo un archivo `JSON` en el cual iremos agregando las variables de entorno que necesitaremos y cuando lo tengamos listo lo llevaremos a railway.

Si esta usando `credentials` <small>(viene por defecto desde Rails 6)</small> para configurar sus variables de entorno, sera necesario que agregue su `master.key` en railway. Este archivo solo lo tiene el que inicio el proyecto, este archivo por defecto esta agregado al .gitignore <small>(‚ö† este archivo nunca debe subirse a github)</small>, y se encuentra en la ruta `name-project/config/master.key` y contenido lo vamos a agregar al key => `RAILS_MASTER_KEY`:

```json
{
  "RAILS_MASTER_KEY": "sdf56r2e...."
}
```

Luego tambi√©n necesitaremos del `SECRET_KEY_BASE`, esta es una variable de entorno que se encuentra dentro de los `credentials` y se agrega por defecto en nuestro proyecto. Para saber cual es su valor tenemos que escribir ejecutar el comando `EDITOR='code --wait' rails credentials:edit` desde la ra√≠z de nuestro proyecto, el comando abrir√° un vista temporal de edici√≥n de credenciales:

![](/static/img/articles/deploying-rails-api-railway/secret-key-base.JPG)

Y copiamos el valor de `secret_key_base` y lo agregamos al JSON.

```json
{
  "RAILS_MASTER_KEY": "sdf56r2e....",
  /////
  "SECRET_KEY_BASE": "631f3b144...."
  /////
}
```

Y por ultimo, agregaremos algunas credenciales necesarias para que Railway las use en producci√≥n

```json
{
  "RAILS_MASTER_KEY": "sdf56r2e....",
  "SECRET_KEY_BASE": "631f3b144....",
  /////
  "LANG": "en_US.UTF-8",
  "RACK_ENV": "production",
  "RAILS_ENV": "production",
  "RAILS_LOG_TO_STDOUT": "enabled",
  "RAILS_SERVE_STATIC_FILES": "enabled"
  /////
}
```

_üöß **Nota**: Si tuviera variables de entorno adicionales, este es el momento para agregarlas_

Y listo, tenemos el `JSON` con nuestras credenciales, ahora lo vamos a llevar hasta Railway. Tenemos que navegar hasta la pesta√±a `Variables` de nuestra aplicaci√≥n y seleccionar la opci√≥n de `RAW Editor`:

![](/static/img/articles/deploying-rails-api-railway/add-variables.jpg)

Luego elegimos la opci√≥n de `JSON`, pegamos nuestras credenciales y guardamos. Al guardar las credenciales se volver√° a ejecutar autom√°ticamente un nuevo despliegue.

![](/static/img/articles/deploying-rails-api-railway/re-deploy.jpg)

Y listo! ya tenemos nuestra primera aplicaci√≥n desplegada en Railway.

---

_Si est√°s trabajando con `railway` y tienes alguna duda o tema en particular que te gustar√≠a que abordara en un art√≠culo, no dudes en contactarme. Me encantar√≠a recibir sugerencias de temas que te gustar√≠a que escriba sobre `railway`._

_Si a√∫n no tienes una cuenta en `railway`, √∫nete a trav√©s de mi [link de referencia](https://railway.app?referralCode=4_VY9a), si me ayudas registr√°ndote con mi link, me comprometo a seguir escribiendo sobre `railway` y compartiendo consejos y trucos para sacar el mayor provecho de la plataforma._

<div css={{ display: "flex", justifyContent: "space-between" }}>
  <a
    href="/articles/railway-como-alternativa-a-heroku"
    target="_self"
    css={{ display: "block", color: "#004BCC", textDecoration: "underline" }}
  >
    üëà Y si usamos Railway como alternativa a Heroku?
  </a>
  <a
    href="#"
    target="_self"
    css={{ display: "block", color: "#004BCC", textDecoration: "underline" }}
  >
    Conectando Postgres a una aplicaci√≥n Rails en Railway (in progress) üëâ
  </a>
</div>
